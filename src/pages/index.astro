---
import { actions } from 'astro:actions';
import { ProductsList } from '~/components/products/ProductsList';
import MainLayout from '~/layouts/MainLayout.astro';

export const prerender = false;

const { data, error } = await Astro.callAction(actions.getProductsByPage, { page: 1, limit: 12 });

if (error) {
	return Astro.redirect('/');
}

const { products, totalPages } = data;
---

<MainLayout>
	<h1 class='font-bold'>Listado de productos</h1>
	<ProductsList products={products} />
</MainLayout>
